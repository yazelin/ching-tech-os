# 租戶管理員操作手冊

本手冊說明租戶管理員如何管理自己的租戶，包括設定、成員管理、資料備份等操作。

## 目錄

1. [什麼是租戶管理員](#什麼是租戶管理員)
2. [登入系統](#登入系統)
3. [租戶管理應用程式](#租戶管理應用程式)
4. [管理員操作](#管理員操作)
5. [資料備份與還原](#資料備份與還原)
6. [Line Bot 管理](#line-bot-管理)
7. [常見問題](#常見問題)

## 什麼是租戶管理員

租戶管理員是負責管理組織在 ChingTech OS 中的資源和成員的角色。

### 權限範圍

租戶管理員可以：

- 查看和更新租戶基本資訊
- 新增和移除其他租戶管理員
- 匯出和匯入租戶資料
- 驗證資料完整性
- 管理 Line Bot 群組綁定

租戶管理員**不能**：

- 存取其他租戶的資料
- 建立或刪除租戶（僅平台管理員可操作）
- 修改租戶方案或配額

## 登入系統

### 多租戶模式登入

1. 開啟 ChingTech OS 登入頁面
2. 輸入**租戶代碼**（由平台管理員提供）
3. 輸入您的帳號和密碼
4. 點擊「登入」

![登入畫面](../demo/01-登入畫面.png)

> **提示**：如果您不知道租戶代碼，請聯繫您的平台管理員。

### 單租戶模式登入

如果系統未啟用多租戶模式，直接輸入帳號密碼即可登入。

## 租戶管理應用程式

登入後，在桌面找到「租戶管理」應用程式並點擊開啟。

### 介面概覽

租戶管理應用程式分為以下幾個區塊：

1. **租戶資訊** - 顯示租戶基本資訊和使用量
2. **管理員列表** - 管理租戶管理員
3. **資料管理** - 匯出、匯入、驗證資料

## 管理員操作

### 查看租戶資訊

開啟租戶管理應用程式後，首頁會顯示：

- 租戶名稱和代碼
- 目前方案（trial/basic/professional/enterprise）
- 儲存空間使用量
- 使用者數量
- 專案數量
- AI 使用量統計

### 更新租戶設定

1. 點擊「編輯設定」按鈕
2. 修改允許變更的設定項目：
   - 租戶名稱
   - 通知偏好
   - 其他自訂設定
3. 點擊「儲存」

> **注意**：無法自行修改方案或儲存配額，需聯繫平台管理員。

### 管理租戶管理員

#### 新增管理員

1. 在「管理員列表」區塊點擊「新增管理員」
2. 選擇要升級為管理員的使用者
3. 選擇角色：
   - **admin** - 一般管理員
   - **owner** - 擁有者（最高權限）
4. 點擊「確認」

#### 移除管理員

1. 在管理員列表中找到要移除的管理員
2. 點擊「移除」按鈕
3. 確認移除

> **注意**：無法移除自己的管理員身份。

## 資料備份與還原

### 匯出資料

將租戶的所有資料打包為 ZIP 檔案下載。

1. 在「資料管理」區塊點擊「匯出資料」
2. 選擇匯出選項：
   - **包含檔案** - 包含知識庫、附件等檔案
   - **包含 AI 日誌** - 包含 AI 對話記錄（可能很大）
3. 點擊「開始匯出」
4. 等待處理完成後下載 ZIP 檔案

#### 匯出內容

匯出的 ZIP 檔案包含：

```
export.zip
├── manifest.json       # 匯出摘要
├── data/
│   ├── users.json      # 使用者資料
│   ├── projects.json   # 專案資料
│   ├── vendors.json    # 廠商資料
│   └── ...             # 其他資料表
└── files/              # 檔案（如有選擇）
    ├── knowledge/
    └── attachments/
```

### 匯入資料

從備份 ZIP 檔案還原資料。

1. 在「資料管理」區塊點擊「匯入資料」
2. 選擇 ZIP 檔案
3. 選擇合併模式：
   - **取代** - 清除現有資料後匯入
   - **合併** - 保留現有資料，僅新增不存在的記錄
4. 點擊「開始匯入」
5. 等待處理完成並檢視結果

> **警告**：「取代」模式會刪除現有資料，請確保已做好備份。

### 驗證資料

檢查租戶資料的完整性。

1. 在「資料管理」區塊點擊「驗證資料」
2. 系統會檢查：
   - 各資料表記錄數量
   - 外鍵關聯完整性
   - 檔案系統狀態
3. 檢視驗證結果

如果發現問題，可聯繫平台管理員協助處理。

## Line Bot 管理

ChingTech OS 支援兩種 Line Bot 模式：

| 模式 | 說明 |
|------|------|
| **獨立 Bot** | 租戶使用自己申請的 Line Bot，品牌識別清晰 |
| **共用 Bot** | 使用平台提供的 Bot，需透過指令綁定群組 |

### 設定獨立 Line Bot（推薦）

如果您的組織希望使用自己的 Line Bot（自訂 Bot 名稱和頭像），請依照以下步驟設定：

#### 步驟一：建立 Line Bot

1. 前往 [Line Developers Console](https://developers.line.biz/console/)
2. 建立新的 Provider（或使用現有的）
3. 建立新的 **Messaging API Channel**
4. 填寫基本資訊：
   - Channel name：您的 Bot 名稱
   - Channel description：Bot 描述
   - Category：選擇適合的類別
5. 同意條款並建立

#### 步驟二：設定 Webhook

1. 在 Channel 的 **Messaging API** 標籤頁
2. 找到 **Webhook URL** 欄位
3. 設定為：`https://your-domain/api/linebot/webhook`
   - 將 `your-domain` 替換為實際的平台網址
4. 開啟 **Use webhook** 開關
5. 關閉 **Auto-reply messages**（讓 AI 處理回覆）

#### 步驟三：取得憑證

在 Line Developers Console 複製以下資訊：

| 項目 | 位置 |
|------|------|
| **Channel ID** | Basic settings > Channel ID |
| **Channel Secret** | Basic settings > Channel secret |
| **Channel Access Token** | Messaging API > Channel access token（點擊 Issue 產生） |

#### 步驟四：提交憑證給平台管理員

將以下資訊提供給平台管理員：
- Channel ID
- Channel Secret
- Channel Access Token

> **安全提醒**：這些憑證非常敏感，請透過安全管道傳送，不要使用公開的通訊方式。

平台管理員設定完成後，您的 Line Bot 就會自動連接到 ChingTech OS。

#### 步驟五：驗證設定

1. 將您的 Line Bot 加入測試群組
2. 在群組中輸入 `@{您的 Bot 名稱} 你好`
3. 如果 Bot 回應，表示設定成功

### 使用共用 Bot

如果使用平台提供的共用 Bot，需要將群組綁定到您的租戶。

#### 綁定群組

1. 將 ChingTech Bot 加入 Line 群組
2. 在群組中輸入綁定指令：
   ```
   /綁定 {您的租戶代碼}
   ```
   或
   ```
   /bind {您的租戶代碼}
   ```
3. Bot 會確認綁定成功

> **提示**：租戶代碼可在租戶管理應用程式中查看，或詢問平台管理員。

### 查看綁定的群組

在 Line Bot 管理應用程式中可以查看所有綁定的群組：

1. 開啟「Line Bot」應用程式
2. 在「群組」標籤頁查看已綁定的群組
3. 可以看到群組名稱、成員數、最後活動時間

### 解除綁定

1. 開啟 Line Bot 管理應用程式
2. 找到要解除綁定的群組
3. 點擊「解除綁定」
4. 確認操作

> **注意**：解除綁定後，該群組的歷史訊息會保留，但新訊息不再歸屬於您的租戶。

### Line Bot 功能說明

綁定成功後，您可以在 Line 群組中使用以下功能：

| 功能 | 使用方式 |
|------|----------|
| AI 對話 | @ 提及 Bot 或回覆 Bot 訊息 |
| 專案管理 | 「建立專案 XXX」、「查詢專案」 |
| 知識庫 | 「記錄一下 XXX」、「搜尋 XXX」 |
| NAS 搜尋 | 「找 XXX 檔案」、「給我 XXX 圖」 |
| 清除對話 | `/新對話` 或 `/reset` |

詳細功能說明請參考 [Line Bot 整合文件](linebot.md)。

## 常見問題

### Q: 我是租戶管理員，但看不到租戶管理應用程式？

請確認：
1. 系統已啟用多租戶模式
2. 您的帳號已被設定為租戶管理員
3. 重新登入以刷新權限

### Q: 匯出的檔案很大，下載很慢怎麼辦？

建議：
1. 取消勾選「包含 AI 日誌」選項
2. 使用穩定的網路連線
3. 錯峰時段進行匯出操作

### Q: 匯入失敗怎麼辦？

常見原因：
1. ZIP 檔案格式不正確
2. 來源租戶和目標租戶版本不相容
3. 檔案大小超過限制

解決方法：
1. 確認 ZIP 檔案完整
2. 聯繫平台管理員協助

### Q: 如何將資料從試用租戶遷移到正式租戶？

1. 在試用租戶匯出資料
2. 登入正式租戶
3. 匯入資料（選擇「取代」模式）

> **注意**：遷移後試用租戶的資料不會自動刪除，需另行處理。

### Q: 可以讓其他公司的人員存取我的租戶嗎？

目前不支援跨租戶協作。如需與外部人員協作，可考慮：
1. 建立外部帳號並加入您的租戶
2. 使用公開分享連結分享特定資料

### Q: 儲存空間不足怎麼辦？

1. 清理不需要的舊資料
2. 刪除大型附件檔案
3. 聯繫平台管理員升級方案或增加配額

## 聯繫支援

如有其他問題，請聯繫：

- 平台管理員
- 技術支援團隊

---

*最後更新：2026-01-20*
