# æª”æ¡ˆç®¡ç†æ‡‰ç”¨ç¨‹å¼

æœ¬æ–‡ä»¶èªªæ˜æª”æ¡ˆç®¡ç†ï¼ˆFile Managerï¼‰çš„è¨­è¨ˆèˆ‡å¯¦ä½œã€‚

## åŠŸèƒ½æ¦‚è¦½

- ç€è¦½ NAS å…±äº«è³‡æ–™å¤¾èˆ‡å­ç›®éŒ„
- **æœå°‹åŠŸèƒ½**ï¼ˆéè¿´æœå°‹ã€æ”¯æ´è¬ç”¨å­—å…ƒï¼‰
- æª”æ¡ˆ/è³‡æ–™å¤¾çš„é¸å–ï¼ˆå–®é¸ã€å¤šé¸ã€ç¯„åœé¸å–ï¼‰
- å³å´é è¦½é¢æ¿ï¼ˆåœ–ç‰‡ç¸®åœ–ã€æ–‡å­—é è¦½ï¼‰
- **å¯èª¿æ•´å¯¬åº¦çš„åˆ†éš”ç·š**ï¼ˆæ‹–æ›³èª¿æ•´é è¦½é¢æ¿å¤§å°ï¼‰
- **å¯ç·¨è¼¯çš„è·¯å¾‘æ¬„**ï¼ˆé»æ“Šè·¯å¾‘æ¬„ç›´æ¥è¼¸å…¥è·¯å¾‘ï¼‰
- æª”æ¡ˆæ“ä½œï¼šä¸Šå‚³ã€ä¸‹è¼‰ã€åˆªé™¤ã€é‡å‘½åã€æ–°å¢è³‡æ–™å¤¾
- å³éµé¸å–®
- **çµ±ä¸€çš„æª”æ¡ˆé–‹å•Ÿå…¥å£ï¼ˆFileOpenerï¼‰**
- ç¨ç«‹çš„åœ–ç‰‡æª¢è¦–å™¨ã€æ–‡å­—æª¢è¦–å™¨ã€PDF æª¢è¦–å™¨
- **çµ±ä¸€çš„æ·±è‰²ä¸»é¡Œæ²è»¸æ¨£å¼**

## è¦–çª—çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æª”æ¡ˆç®¡ç†                                                 [_] [â–¡] [âœ•]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â†] [â†’] [â†‘] [ğŸ”„]  â”‚  /home/æ–‡ä»¶  (é»æ“Šå¯ç·¨è¼¯)  â”‚       [ä¸Šå‚³] [æ–°å¢]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åç¨±                    å¤§å°      ä¿®æ”¹æ—¥æœŸ  â”‚â”‚ é è¦½                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ è³‡æ–™å¤¾1               -        2025/12/1 â”‚â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ ğŸ“ è³‡æ–™å¤¾2               -        2025/12/5 â”‚â”‚ â”‚                       â”‚ â”‚
â”‚ ğŸ“„ æ–‡ä»¶.txt           1.2 KB     2025/12/10 â”‚â”‚ â”‚    [åœ–ç‰‡/æ–‡å­—é è¦½]    â”‚ â”‚
â”‚ ğŸ–¼ï¸ åœ–ç‰‡.jpg            500 KB    2025/12/10 â”‚â”‚ â”‚                       â”‚ â”‚
â”‚ ğŸ“„ å ±å‘Š.md             2.5 KB     2025/12/8 â”‚â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚â”‚ åœ–ç‰‡.jpg                  â”‚
â”‚                                             â”‚â”‚ é¡å‹: JPG  å¤§å°: 500 KB   â”‚
â”‚                                             â”‚â”‚ ä¿®æ”¹: 2025/12/10 14:30    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5 å€‹é …ç›® â”‚ é¸å– 1 å€‹                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†‘                                   â†‘â†‘
     æª”æ¡ˆåˆ—è¡¨                            åˆ†éš”ç·šï¼ˆå¯æ‹–æ›³ï¼‰
```

### æ–°ç‰ˆé è¦½é¢æ¿ä½ˆå±€

é è¦½é¢æ¿åˆ†ç‚ºå…©å€‹å€åŸŸï¼š
1. **ä¸Šæ–¹ - é è¦½å€ (fm-preview-main)**ï¼šé¡¯ç¤ºåœ–ç‰‡ç¸®åœ–ã€æ–‡å­—å…§å®¹æˆ–æª”æ¡ˆåœ–ç¤º
2. **ä¸‹æ–¹ - è³‡è¨Šå€ (fm-preview-info)**ï¼šé¡¯ç¤ºæª”åã€é¡å‹ã€å¤§å°ã€ä¿®æ”¹æ—¥æœŸ

## å‰ç«¯æª”æ¡ˆ

| æª”æ¡ˆ | èªªæ˜ |
|------|------|
| `frontend/js/file-manager.js` | FileManagerModule ä¸»æ¨¡çµ„ |
| `frontend/css/file-manager.css` | æ¨£å¼ï¼ˆå·¥å…·åˆ—ã€åˆ—è¡¨ã€é è¦½ã€é¸å–®ã€å°è©±æ¡†ã€æ²è»¸ï¼‰ |
| `frontend/js/file-utils.js` | FileUtils çµ±ä¸€æª”æ¡ˆå·¥å…·ï¼ˆé¡å‹åˆ¤æ–·ã€åœ–ç¤ºã€æ ¼å¼åŒ–ï¼‰ |
| `frontend/js/file-opener.js` | FileOpener çµ±ä¸€æª”æ¡ˆé–‹å•Ÿå…¥å£ |
| `frontend/js/image-viewer.js` | ImageViewerModule åœ–ç‰‡æª¢è¦–å™¨ |
| `frontend/js/text-viewer.js` | TextViewerModule æ–‡å­—æª¢è¦–å™¨ |
| `frontend/js/pdf-viewer.js` | PdfViewerModule PDF æª¢è¦–å™¨ï¼ˆä½¿ç”¨ PDF.jsï¼‰ |
| `frontend/css/viewer.css` | æª¢è¦–å™¨å…±ç”¨æ¨£å¼ |
| `frontend/css/file-common.css` | çµ±ä¸€æª”æ¡ˆé¡¯ç¤ºæ¨£å¼ï¼ˆåœ–ç¤ºé¡è‰²ã€å¡ç‰‡ã€æ¨™ç±¤ï¼‰ |

## FileManagerModule API

### é–‹å•Ÿèˆ‡é—œé–‰

```javascript
// é–‹å•Ÿæª”æ¡ˆç®¡ç†è¦–çª—
FileManagerModule.open();

// é—œé–‰è¦–çª—
FileManagerModule.close();
```

### å…§éƒ¨ç‹€æ…‹

```javascript
{
  windowId: null,           // è¦–çª— ID
  currentPath: '/',         // ç›®å‰è·¯å¾‘
  items: [],                // ç›®å‰è³‡æ–™å¤¾çš„é …ç›®åˆ—è¡¨
  selectedItems: new Set(), // é¸å–çš„é …ç›®ï¼ˆæª”åï¼‰
  lastSelectedIndex: -1,    // ä¸Šæ¬¡é¸å–çš„ç´¢å¼•ï¼ˆç”¨æ–¼ Shift ç¯„åœé¸å–ï¼‰
  isEditingPath: false,     // æ˜¯å¦æ­£åœ¨ç·¨è¼¯è·¯å¾‘
  previewWidth: 300,        // é è¦½é¢æ¿å¯¬åº¦ï¼ˆå¯æ‹–æ›³èª¿æ•´ï¼‰
}
```

## ä½¿ç”¨è€…æ“ä½œ

### å°èˆª

| æ“ä½œ | èªªæ˜ |
|------|------|
| é›™æ“Šè³‡æ–™å¤¾ | é€²å…¥è©²è³‡æ–™å¤¾ |
| é›™æ“Šæª”æ¡ˆ | é–‹å•Ÿå°æ‡‰çš„æª¢è¦–å™¨ |
| é»æ“Šã€Œâ†ã€ | ä¸Šä¸€æ­¥ï¼ˆæ­·å²è¨˜éŒ„ï¼‰ |
| é»æ“Šã€Œâ†’ã€ | ä¸‹ä¸€æ­¥ï¼ˆæ­·å²è¨˜éŒ„ï¼‰ |
| é»æ“Šã€Œâ†‘ã€ | ä¸Šå±¤è³‡æ–™å¤¾ |
| é»æ“Šã€ŒğŸ”„ã€ | é‡æ–°æ•´ç† |
| **é»æ“Šè·¯å¾‘æ¬„** | é€²å…¥ç·¨è¼¯æ¨¡å¼ï¼Œå¯ç›´æ¥è¼¸å…¥è·¯å¾‘ |
| **Enterï¼ˆè·¯å¾‘ç·¨è¼¯ä¸­ï¼‰** | å°èˆªè‡³è¼¸å…¥çš„è·¯å¾‘ |
| **Escï¼ˆè·¯å¾‘ç·¨è¼¯ä¸­ï¼‰** | å–æ¶ˆç·¨è¼¯ï¼Œæ¢å¾©é¡¯ç¤ºæ¨¡å¼ |

### é¸å–

| æ“ä½œ | èªªæ˜ |
|------|------|
| é»æ“Šé …ç›® | å–®é¸ï¼ˆå–æ¶ˆå…¶ä»–é¸å–ï¼‰ |
| Ctrl + é»æ“Š | å¤šé¸ï¼ˆåˆ‡æ›è©²é …ç›®çš„é¸å–ç‹€æ…‹ï¼‰ |
| Shift + é»æ“Š | ç¯„åœé¸å–ï¼ˆå¾ä¸Šæ¬¡é¸å–åˆ°ç›®å‰é …ç›®ï¼‰ |

### èª¿æ•´é è¦½é¢æ¿å¤§å°

1. å°‡æ»‘é¼ ç§»è‡³åˆ—è¡¨èˆ‡é è¦½é¢æ¿ä¹‹é–“çš„åˆ†éš”ç·š
2. æ»‘é¼ è®Šæˆå·¦å³ç®­é ­ï¼ˆcol-resizeï¼‰
3. æŒ‰ä½ä¸¦æ‹–æ›³å¯èª¿æ•´é è¦½é¢æ¿å¯¬åº¦
4. æœ€å°å¯¬åº¦ 200pxï¼Œæœ€å¤§å¯¬åº¦ç‚ºè¦–çª—å¯¬åº¦çš„ 50%

### æœå°‹åŠŸèƒ½

å¾ç›®å‰è·¯å¾‘éè¿´æœå°‹æª”æ¡ˆå’Œè³‡æ–™å¤¾ã€‚

**ä½¿ç”¨æ–¹å¼ï¼š**
1. åœ¨æœå°‹æ¡†è¼¸å…¥é—œéµå­—
2. æŒ‰ Enter åŸ·è¡Œæœå°‹
3. é›™æ“Šçµæœå¯å°èˆªåˆ°è©²ä½ç½®
4. æŒ‰ Escape æˆ–é»æ“Š Ã— æ¸…é™¤æœå°‹

**æ”¯æ´è¬ç”¨å­—å…ƒï¼š**
- `*` åŒ¹é…ä»»æ„å­—å…ƒï¼ˆå¦‚ `*.py` æœå°‹æ‰€æœ‰ Python æª”æ¡ˆï¼‰
- `?` åŒ¹é…å–®ä¸€å­—å…ƒ
- ä¸è¼¸å…¥è¬ç”¨å­—å…ƒæœƒè‡ªå‹•è®Šæˆ `*é—œéµå­—*`

**é™åˆ¶ï¼š**
- æœ€å¤§æœå°‹æ·±åº¦ï¼š5 å±¤ï¼ˆå¯èª¿æ•´ï¼Œæœ€å¤§ 10 å±¤ï¼‰
- æœ€å¤§çµæœæ•¸é‡ï¼š100 ç­†ï¼ˆå¯èª¿æ•´ï¼Œæœ€å¤§ 500 ç­†ï¼‰

**APIï¼š**
```
GET /api/nas/search?path=/home&query=*.py&max_depth=5&max_results=100
```

### å³éµé¸å–®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‚ é–‹å•Ÿ       â”‚  â† è³‡æ–™å¤¾æˆ–æª”æ¡ˆ
â”‚ ğŸ“¥ ä¸‹è¼‰       â”‚  â† åƒ…æª”æ¡ˆ
â”‚ âœï¸ é‡æ–°å‘½å    â”‚
â”‚ ğŸ—‘ï¸ åˆªé™¤       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## é è¦½é¢æ¿

### æ”¯æ´çš„é è¦½é¡å‹

**æ–‡å­—æª”**ï¼ˆé¡¯ç¤ºå‰ 50 è¡Œï¼‰ï¼š
- `.txt`, `.md`, `.json`, `.log`, `.csv`, `.html`, `.css`, `.js`, `.xml`, `.yaml`, `.yml`

**åœ–ç‰‡æª”**ï¼ˆé¡¯ç¤ºç¸®åœ–ï¼‰ï¼š
- `.jpg`, `.jpeg`, `.png`, `.gif`, `.svg`, `.webp`

**å…¶ä»–æª”æ¡ˆ**ï¼š
- é¡¯ç¤ºå¤§å‹æª”æ¡ˆåœ–ç¤ºå’ŒåŸºæœ¬è³‡è¨Šï¼ˆåç¨±ã€é¡å‹ã€å¤§å°ã€ä¿®æ”¹æ—¥æœŸï¼‰

### é è¦½é¢æ¿çµæ§‹

```html
<div class="fm-preview">
  <div class="fm-preview-header">é è¦½</div>
  <div class="fm-preview-content">
    <!-- é è¦½ä¸»å€åŸŸ -->
    <div class="fm-preview-main">
      <!-- åœ–ç‰‡: fm-preview-image > img -->
      <!-- æ–‡å­—: fm-preview-text -->
      <!-- åœ–ç¤º: fm-preview-icon-large -->
    </div>
    <!-- æª”æ¡ˆè³‡è¨Š -->
    <div class="fm-preview-info">
      <div class="fm-preview-filename">æª”å</div>
      <div class="fm-preview-meta">
        <div class="fm-preview-meta-item">é¡å‹: JPG</div>
        <div class="fm-preview-meta-item">å¤§å°: 500 KB</div>
        <div class="fm-preview-meta-item">ä¿®æ”¹: 2025/12/10</div>
      </div>
    </div>
  </div>
</div>
```

## æª”æ¡ˆæ“ä½œ

### ä¸Šå‚³

1. é»æ“Šå·¥å…·åˆ—ã€Œä¸Šå‚³ã€æŒ‰éˆ•
2. é¸æ“‡æœ¬æ©Ÿæª”æ¡ˆ
3. POST `/api/nas/upload` (multipart/form-data)
4. æˆåŠŸå¾Œé‡æ–°æ•´ç†åˆ—è¡¨

### ä¸‹è¼‰

1. é¸å–æª”æ¡ˆ â†’ å³éµ â†’ ä¸‹è¼‰
2. å»ºç«‹éš±è—çš„ `<a>` å…ƒç´ 
3. `href` æŒ‡å‘ `/api/nas/download?path=...`
4. è§¸ç™¼é»æ“Šä¸‹è¼‰

### åˆªé™¤

1. é¸å–é …ç›® â†’ å³éµ â†’ åˆªé™¤
2. é¡¯ç¤ºç¢ºèªå°è©±æ¡†
3. å¦‚æœåŒ…å«éç©ºè³‡æ–™å¤¾ï¼Œé¡¯ç¤ºéè¿´åˆªé™¤è­¦å‘Š
4. DELETE `/api/nas/file`
5. æˆåŠŸå¾Œé‡æ–°æ•´ç†åˆ—è¡¨

### é‡å‘½å

1. é¸å–é …ç›® â†’ å³éµ â†’ é‡æ–°å‘½å
2. é¡¯ç¤ºè¼¸å…¥å°è©±æ¡†
3. PATCH `/api/nas/rename`
4. æˆåŠŸå¾Œé‡æ–°æ•´ç†åˆ—è¡¨

### æ–°å¢è³‡æ–™å¤¾

1. é»æ“Šå·¥å…·åˆ—ã€Œæ–°å¢è³‡æ–™å¤¾ã€æŒ‰éˆ•
2. é¡¯ç¤ºè¼¸å…¥å°è©±æ¡†
3. POST `/api/nas/mkdir`
4. æˆåŠŸå¾Œé‡æ–°æ•´ç†åˆ—è¡¨

## åœ–ç‰‡æª¢è¦–å™¨ (ImageViewerModule)

### åŠŸèƒ½

- é¡¯ç¤ºåœ–ç‰‡
- ç¸®æ”¾ï¼š10% ~ 500%ï¼ˆæ¯æ¬¡ Â±25%ï¼‰
- æ»¾è¼ªç¸®æ”¾
- é©åˆè¦–çª—å¤§å°
- æ‹–æ›³å¹³ç§»

### é–‹å•Ÿæ–¹å¼

```javascript
// å¾æª”æ¡ˆç®¡ç†é›™æ“Šåœ–ç‰‡æ™‚å‘¼å«
ImageViewerModule.open('/home/æ–‡ä»¶/photo.jpg', 'photo.jpg');
```

### è¦–çª—çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ photo.jpg                    [_] [â–¡] [âœ•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚            [åœ–ç‰‡å…§å®¹]                    â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â–] [100%] [â•] [é©åˆå¤§å°]              â”‚  â† æ§åˆ¶åˆ—
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ–‡å­—æª¢è¦–å™¨ (TextViewerModule)

### åŠŸèƒ½

- é¡¯ç¤ºç´”æ–‡å­—å…§å®¹
- å¯æ²å‹•
- é¡¯ç¤ºè¡Œæ•¸

### é–‹å•Ÿæ–¹å¼

```javascript
// å¾æª”æ¡ˆç®¡ç†é›™æ“Šæ–‡å­—æª”æ™‚å‘¼å«
TextViewerModule.open('/home/æ–‡ä»¶/readme.txt', 'readme.txt');
```

### è¦–çª—çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ readme.txt                   [_] [â–¡] [âœ•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1 â”‚ # README                            â”‚
â”‚ 2 â”‚                                     â”‚
â”‚ 3 â”‚ This is a sample file.              â”‚
â”‚ 4 â”‚ ...                                 â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4 è¡Œ                                    â”‚  â† ç‹€æ…‹åˆ—
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## PDF æª¢è¦–å™¨ (PdfViewerModule)

### åŠŸèƒ½

- æ¸²æŸ“ PDF æ–‡ä»¶ï¼ˆä½¿ç”¨ PDF.jsï¼ŒCDN å‹•æ…‹è¼‰å…¥ï¼‰
- é é¢å°èˆªï¼šä¸Šä¸€é ã€ä¸‹ä¸€é ã€è·³è‡³æŒ‡å®šé 
- ç¸®æ”¾ï¼š25% ~ 400%
- é©åˆå¯¬åº¦ã€é©åˆé é¢

### é–‹å•Ÿæ–¹å¼

```javascript
// å¾æª”æ¡ˆç®¡ç†é›™æ“Š PDF æ™‚å‘¼å«
PdfViewerModule.open('/home/æ–‡ä»¶/report.pdf', 'report.pdf');

// æˆ–é€é FileOpener çµ±ä¸€å…¥å£
FileOpener.open('/home/æ–‡ä»¶/report.pdf', 'report.pdf');
```

### è¦–çª—çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ report.pdf                   [_] [â–¡] [âœ•] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â—€] [1/10] [â–¶]  [â–][100%][â•] [å¯¬][é ]  â”‚  â† å·¥å…·åˆ—
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚              [PDF é é¢]                  â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ report.pdf | 100%                       â”‚  â† ç‹€æ…‹åˆ—
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## FileOpener çµ±ä¸€å…¥å£

FileOpener æä¾›çµ±ä¸€çš„æª”æ¡ˆé–‹å•Ÿä»‹é¢ï¼Œè‡ªå‹•æ ¹æ“šå‰¯æª”ååˆ¤æ–·æ‡‰ä½¿ç”¨å“ªå€‹æª¢è¦–å™¨ã€‚

### API

```javascript
// é–‹å•Ÿæª”æ¡ˆï¼ˆè‡ªå‹•åˆ¤æ–·é¡å‹ï¼‰
FileOpener.open(filePath, filename);

// æª¢æŸ¥æ˜¯å¦æ”¯æ´é–‹å•Ÿ
FileOpener.canOpen(filename);  // å›å‚³ boolean

// å–å¾—å°æ‡‰çš„æª¢è¦–å™¨é¡å‹
FileOpener.getViewerType(filename);  // å›å‚³ 'image' | 'text' | 'pdf' | null
```

### æ”¯æ´çš„å‰¯æª”å

| é¡å‹ | å‰¯æª”å | æª¢è¦–å™¨ |
|------|--------|--------|
| åœ–ç‰‡ | jpg, jpeg, png, gif, svg, webp, bmp, ico | ImageViewerModule |
| æ–‡å­— | txt, md, json, yaml, yml, xml, html, css, js, py, log, ini, conf, sh, sql | TextViewerModule |
| PDF | pdf | PdfViewerModule |

### ä½¿ç”¨ç¯„ä¾‹

```javascript
// æª”æ¡ˆç®¡ç†é›™æ“Šæª”æ¡ˆæ™‚
function openFile(name) {
  const filePath = currentPath + '/' + name;
  if (FileOpener.canOpen(name)) {
    FileOpener.open(filePath, name);
  }
}

// å°ˆæ¡ˆç®¡ç†ã€çŸ¥è­˜åº«é™„ä»¶é è¦½
FileOpener.open('/api/projects/attachments/xxx/file.pdf', 'file.pdf');
```

## FileUtils å·¥å…·æ¨¡çµ„

FileUtils æä¾›çµ±ä¸€çš„æª”æ¡ˆé¡å‹åˆ¤æ–·ã€åœ–ç¤ºå°æ‡‰ã€æ ¼å¼åŒ–ç­‰åŠŸèƒ½ï¼Œä¾›å„æ¨¡çµ„å…±ç”¨ã€‚

### API

```javascript
// å–å¾—æª”æ¡ˆé¡å‹åˆ†é¡
FileUtils.getFileCategory('photo.jpg');  // 'image'
FileUtils.getFileCategory('app.js');     // 'code'
FileUtils.getFileCategory('drawing.dwg'); // 'cad'

// å–å¾—æª”æ¡ˆåœ–ç¤ºåç¨±ï¼ˆå°æ‡‰ icons.jsï¼‰
FileUtils.getFileIcon('photo.jpg');   // 'image'
FileUtils.getFileIcon('report.pdf');  // 'file-pdf-box'
FileUtils.getFileIcon('archive.zip'); // 'folder-zip'

// å–å¾— CSS é¡åˆ¥ï¼ˆç”¨æ–¼é¡è‰²æ¨£å¼ï¼‰
FileUtils.getFileTypeClass('photo.jpg');  // 'image'
FileUtils.getFileTypeClass('video.mp4');  // 'video'

// æ ¼å¼åŒ–æª”æ¡ˆå¤§å°
FileUtils.formatFileSize(1536);     // '1.5 KB'
FileUtils.formatFileSize(1572864);  // '1.5 MB'

// é¡å‹åˆ¤æ–·è¼”åŠ©å‡½å¼
FileUtils.isImageFile('photo.jpg');  // true
FileUtils.isTextFile('readme.md');   // true
FileUtils.isPdfFile('report.pdf');   // true
FileUtils.isVideoFile('movie.mp4');  // true
FileUtils.isAudioFile('song.mp3');   // true
```

### æª”æ¡ˆé¡å‹åˆ†é¡

| é¡å‹ | å‰¯æª”å | åœ–ç¤ºé¡è‰² |
|------|--------|----------|
| image | jpg, jpeg, png, gif, svg, webp, bmp, heic, ico, tiff | ç¶ è‰² |
| video | mp4, webm, avi, mov, mkv, m4v, wmv, flv, 3gp | ç´«è‰² |
| audio | mp3, m4a, wav, ogg, flac, aac, wma, aiff | é»ƒè‰² |
| pdf | pdf | ç´…è‰² |
| document | doc, docx, odt, rtf | è—è‰² |
| spreadsheet | xls, xlsx, ods, csv | ç¶ è‰² |
| presentation | ppt, pptx, odp | æ©˜è‰² |
| code | js, ts, py, java, c, cpp, h, cs, go, rs, rb, php, html, css, json, xml, yaml, yml, sql, sh, bash | é’è‰² |
| text | txt, md, log, ini, conf, cfg | ç°è‰² |
| cad | dwg, dxf, step, stp, iges, igs, stl, 3ds, obj, fbx | æ©˜è‰² |
| archive | zip, rar, 7z, tar, gz, bz2 | ç²‰è‰² |
| default | å…¶ä»– | ç°è‰² |

## CSS é¡åˆ¥

### ä¸»è¦å®¹å™¨

```css
.file-manager           /* ä¸»å®¹å™¨ */
.fm-toolbar             /* å·¥å…·åˆ— */
.fm-main                /* å…§å®¹å€ï¼ˆåˆ—è¡¨ + åˆ†éš”ç·š + é è¦½ï¼‰ */
.fm-file-list           /* æª”æ¡ˆåˆ—è¡¨ */
.fm-resizer             /* å¯æ‹–æ›³åˆ†éš”ç·š */
.fm-preview             /* é è¦½é¢æ¿ */
.fm-statusbar           /* ç‹€æ…‹åˆ— */
```

### è·¯å¾‘æ¬„

```css
.fm-path-container      /* è·¯å¾‘æ¬„å®¹å™¨ */
.fm-path-display        /* è·¯å¾‘é¡¯ç¤ºæ¨¡å¼ */
.fm-path-input-wrapper  /* è·¯å¾‘è¼¸å…¥æ¨¡å¼å®¹å™¨ */
.fm-path-input          /* è·¯å¾‘è¼¸å…¥æ¡† */
```

### åˆ—è¡¨æ¨™é ­

```css
.fm-list-header         /* åˆ—è¡¨æ¨™é ­åˆ— */
.fm-list-header-name    /* åç¨±æ¬„ */
.fm-list-header-size    /* å¤§å°æ¬„ */
.fm-list-header-date    /* ä¿®æ”¹æ—¥æœŸæ¬„ */
```

### é …ç›®

```css
.fm-file-item           /* å–®ä¸€é …ç›® */
.fm-file-item.selected  /* é¸å–ç‹€æ…‹ */
.fm-file-icon           /* åœ–ç¤º */
.fm-file-name           /* æª”å */
.fm-file-size           /* å¤§å° */
.fm-file-modified       /* æ—¥æœŸ */
```

### é è¦½é¢æ¿

```css
.fm-preview-header      /* é è¦½æ¨™é¡Œ */
.fm-preview-content     /* é è¦½å…§å®¹å€ */
.fm-preview-main        /* é è¦½ä¸»å€ï¼ˆåœ–ç‰‡/æ–‡å­—ï¼‰ */
.fm-preview-image       /* åœ–ç‰‡é è¦½å®¹å™¨ */
.fm-preview-text        /* æ–‡å­—é è¦½å®¹å™¨ */
.fm-preview-icon-large  /* å¤§å‹åœ–ç¤ºï¼ˆéé è¦½æª”æ¡ˆï¼‰ */
.fm-preview-info        /* æª”æ¡ˆè³‡è¨Šå€ */
.fm-preview-filename    /* æª”å */
.fm-preview-meta        /* å…ƒè³‡æ–™å®¹å™¨ */
.fm-preview-meta-item   /* å…ƒè³‡æ–™é …ç›® */
```

### åˆ†éš”ç·š

```css
.fm-resizer             /* åˆ†éš”ç·š */
.fm-resizer:hover       /* æ‡¸åœæ™‚é«˜äº® */
.fm-resizer.dragging    /* æ‹–æ›³ä¸­ */
```

### æ²è»¸ï¼ˆæ·±è‰²ä¸»é¡Œï¼‰

```css
.file-manager ::-webkit-scrollbar           /* æ²è»¸æ•´é«” */
.file-manager ::-webkit-scrollbar-track     /* æ²è»¸è»Œé“ */
.file-manager ::-webkit-scrollbar-thumb     /* æ²è»¸æ»‘å¡Š */
.file-manager ::-webkit-scrollbar-thumb:hover /* æ»‘å¡Šæ‡¸åœ */
```

### å³éµé¸å–®

```css
.fm-context-menu        /* é¸å–®å®¹å™¨ */
.fm-context-menu-item   /* é¸å–®é …ç›® */
.fm-context-menu-item:hover /* æ‡¸åœç‹€æ…‹ */
.fm-context-menu-divider /* åˆ†éš”ç·š */
```

### å°è©±æ¡†

```css
.fm-dialog-overlay      /* é®ç½© */
.fm-dialog              /* å°è©±æ¡† */
.fm-dialog-header       /* æ¨™é¡Œå€ */
.fm-dialog-body         /* å…§å®¹å€ */
.fm-dialog-footer       /* æŒ‰éˆ•å€ */
.fm-dialog-input        /* è¼¸å…¥æ¡† */
```

## åœ–ç¤º

ä½¿ç”¨ `frontend/js/icons.js` æä¾›çš„ SVG åœ–ç¤ºï¼š

| åœ–ç¤ºåç¨± | ç”¨é€” |
|----------|------|
| `folder` | è³‡æ–™å¤¾ |
| `file` | ä¸€èˆ¬æª”æ¡ˆ |
| `file-document` | æ–‡å­—æª” |
| `file-image` | åœ–ç‰‡æª” |
| `code-braces` | ç¨‹å¼ç¢¼æª” |
| `chevron-left` | ä¸Šä¸€æ­¥ |
| `chevron-right` | ä¸‹ä¸€æ­¥ |
| `chevron-up` | ä¸Šå±¤ |
| `refresh` | é‡æ–°æ•´ç† |
| `upload` | ä¸Šå‚³ |
| `folder-plus` | æ–°å¢è³‡æ–™å¤¾ |
| `download` | ä¸‹è¼‰ |
| `edit` | é‡å‘½å |
| `delete` | åˆªé™¤ |
| `zoom-in` | æ”¾å¤§ |
| `zoom-out` | ç¸®å° |
| `fit-screen` | é©åˆå¤§å° |
| `information` | è³‡è¨Š/éŒ¯èª¤æç¤º |
| `close` | é—œé–‰ |

## ç›¸é—œæ–‡ä»¶

- [SMB/NAS æ¶æ§‹](./smb-nas-architecture.md) - å¾Œç«¯ SMB é€£ç·šå¯¦ä½œ
- `openspec/changes/add-file-manager/proposal.md` - åŠŸèƒ½è¦æ ¼
- `openspec/changes/add-file-manager/specs/file-manager/spec.md` - è©³ç´°éœ€æ±‚
